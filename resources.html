<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resources · nijika.de</title>
  <meta name="description" content="Guides and resources from nijika.de">
  <link rel="icon" type="image/x-icon" href="./img/favicon.ico">
  <link rel="stylesheet" href="./assets/styles.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>

  <!-- ==================== MAIN CONTAINER ==================== -->
  <div class="neo-container">
    
    <!-- Site Banner/Header -->
    <div class="site-banner">
      <a href="./" class="brand" style="text-decoration: none !important; color: var(--primary) !important;">nijika.de</a>
      <div class="header-controls">
        <button class="color-picker-toggle" title="Change color" data-color-picker>
          <i class="bi bi-palette"></i>
        </button>
        <button class="theme-toggle" title="Toggle theme" data-toggle-theme>
          <i class="bi bi-brightness-high"></i>
        </button>
      </div>
    </div>

    <!-- Color Picker Modal -->
    <div class="color-picker-modal" data-color-modal>
      <div class="color-picker-content">
        <div class="color-picker-header">
          <h3>Choose Your Color</h3>
          <button class="color-picker-close" data-color-close>
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
        <div class="color-picker-options">
          <button class="color-option" data-color="cyan" title="Cyan">
            <div class="color-preview" style="background: linear-gradient(135deg, #6de6e2, #a8f5f2);"></div>
            <span>Cyan</span>
          </button>
          <button class="color-option" data-color="pink" title="Pink">
            <div class="color-preview" style="background: linear-gradient(135deg, #ff6b9d, #ffa4c4);"></div>
            <span>Pink</span>
          </button>
          <button class="color-option" data-color="purple" title="Purple">
            <div class="color-preview" style="background: linear-gradient(135deg, #9b59b6, #bb8fce);"></div>
            <span>Purple</span>
          </button>
          <button class="color-option" data-color="green" title="Green">
            <div class="color-preview" style="background: linear-gradient(135deg, #2ecc71, #7fd99f);"></div>
            <span>Green</span>
          </button>
          <button class="color-option" data-color="orange" title="Orange">
            <div class="color-preview" style="background: linear-gradient(135deg, #ff9f43, #ffbe76);"></div>
            <span>Orange</span>
          </button>
          <button class="color-option" data-color="blue" title="Blue">
            <div class="color-preview" style="background: linear-gradient(135deg, #5dade2, #85c1e9);"></div>
            <span>Blue</span>
          </button>
          <button class="color-option" data-color="red" title="Red">
            <div class="color-preview" style="background: linear-gradient(135deg, #e74c3c, #ec7063);"></div>
            <span>Red</span>
          </button>
          <button class="color-option" data-color="yellow" title="Yellow">
            <div class="color-preview" style="background: linear-gradient(135deg, #f1c40f, #f7dc6f);"></div>
            <span>Yellow</span>
          </button>
          <button class="color-option" data-color="teal" title="Teal">
            <div class="color-preview" style="background: linear-gradient(135deg, #1abc9c, #48c9b0);"></div>
            <span>Teal</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Status Strip (CRT Effect) -->
    <div class="status-strip-screen" id="statusStrip">
      <div class="status-strip-content">
        <div class="status-info">
          <span class="status-feeling"><i class="bi bi-emoji-smile"></i> <span id="statusFeeling">Loading...</span></span>
          <span class="status-divider">|</span>
          <span class="status-doing"><i class="bi bi-activity"></i> <span id="statusDoing">Loading...</span></span>
          <span class="status-divider hide-mobile">|</span>
          <span class="status-updated hide-mobile"><i class="bi bi-clock"></i> <span id="statusUpdated">--</span></span>
        </div>
        <div class="status-marquee">
          <div class="marquee-track" id="marqueeTrack">
            <span class="marquee-text" id="marqueeText">Welcome to nijika.de! ✨</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Layout: Sidebar + Main -->
    <div class="neo-layout">
      
      <!-- ==================== SIDEBAR ==================== -->
      <aside class="neo-sidebar">
        
        <!-- Navigation Box -->
        <div class="neo-box">
          <div class="neo-header"><h3>Navigate</h3></div>
          <div class="neo-content">
            <ul>
              <li><a href="./">Home</a></li>
              <li><a href="./#about">About</a></li>
              <li><a href="./#portfolio">Portfolio</a></li>
              <li><a href="./blogs.html">Blogs</a></li>
              <li><a href="./stories.html">Stories</a></li>
            </ul>
          </div>
        </div>

        <!-- Resources Nav -->
        <div class="neo-box">
          <div class="neo-header"><h3>Resources</h3></div>
          <div class="neo-content">
            <ul>
              <li><a href="?cat=scanlation" class="resource-tab" data-cat="scanlation"><i class="bi bi-translate"></i> Scanlation</a></li>
              <li><a href="?cat=youtube" class="resource-tab" data-cat="youtube"><i class="bi bi-youtube"></i> YouTube</a></li>
            </ul>
          </div>
        </div>

        <!-- Scrollbox with images -->
        <div class="neo-box scroll-animate">
          <div class="neo-header"><h3>Gallery</h3></div>
          <div class="neo-content">
            <div class="neo-scrollbox">
              <img src="./img/pfp.png" alt="Profile">
              <img src="./img/topheader.png" alt="Profile">
            </div>
          </div>
        </div>

        <!-- Additional Images -->
        <div class="neo-box scroll-animate">
          <div class="neo-header"><h3>More</h3></div>
          <div class="neo-content" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
            <img src="./img/igotaleek.gif" alt="I got a leek" style="width: 120px; border-radius: 4px;">
            <img src="./img/2voca.jpg" alt="Vocaloid" style="width: 120px; border-radius: 4px;">
            <img src="./img/0178-mikuwink2.gif" alt="Miku wink" style="width: 120px; border-radius: 4px;">
          </div>
        </div>

        <!-- Stats Widget -->
        <div class="neo-box scroll-animate">
          <div class="neo-header"><h3><i class="bi bi-bar-chart"></i> Stats</h3></div>
          <div class="neo-content">
            <div class="stats-grid sidebar-stats">
              <div class="stat-item">
                <span class="stat-value" id="statProjects">--</span>
                <span class="stat-label">Projects</span>
              </div>
              <div class="stat-item">
                <span class="stat-value" id="statPosts">--</span>
                <span class="stat-label">Posts</span>
              </div>
              <div class="stat-item">
                <span class="stat-value" id="statVisitors">--</span>
                <span class="stat-label">Online Now</span>
              </div>
              <div class="stat-item">
                <span class="stat-value" id="statPageviews">--</span>
                <span class="stat-label">Total Visits</span>
              </div>
            </div>
          </div>
        </div>

      </aside>

      <!-- ==================== MAIN CONTENT ==================== -->
      <main class="neo-main">
        
        <section class="neo-box">
          <div class="neo-header">
            <h2><i class="bi bi-book" id="categoryIcon"></i> <span id="categoryTitle">Resources</span></h2>
          </div>
          <div class="neo-content">
            <p class="text-muted mb-2" id="categoryDesc">Guides and helpful resources</p>
            
            <!-- Category Tabs (mobile) -->
            <div class="resource-tabs-mobile">
              <button class="btn" data-cat="scanlation" onclick="switchCategory('scanlation')">
                <i class="bi bi-translate"></i> Scanlation
              </button>
              <button class="btn" data-cat="youtube" onclick="switchCategory('youtube')">
                <i class="bi bi-youtube"></i> YouTube
              </button>
            </div>
            
            <div id="resourcePanels" class="resource-panels">
              <div class="loading">Loading resources...</div>
            </div>
          </div>
        </section>

      </main>

      <!-- ==================== RIGHT SIDEBAR (WIDGETS) ==================== -->
      <aside class="neo-widgets">
        
        <!-- Now Widget -->
        <div class="neo-box scroll-animate widget-now">
          <div class="neo-header"><h3><i class="bi bi-clock-history"></i> Now</h3></div>
          <div class="neo-content">
            <div class="now-widget-item">
              <span class="now-widget-label">Working On</span>
              <span class="now-widget-value" id="widgetWorkingOn">Loading...</span>
            </div>
            <div class="now-widget-item">
              <span class="now-widget-label">Learning</span>
              <span class="now-widget-value" id="widgetLearning">Loading...</span>
            </div>
            <div class="now-widget-item">
              <span class="now-widget-label">Open to Collabs</span>
              <span class="now-widget-value" id="widgetCollabs"><i class="bi bi-question-circle"></i></span>
            </div>
          </div>
        </div>

        <!-- Changelog Widget -->
        <div class="neo-box scroll-animate widget-changelog">
          <div class="neo-header"><h3><i class="bi bi-list-check"></i> Updates</h3></div>
          <div class="neo-content">
            <div class="changelog-widget-list" id="widgetChangelog">
              <div class="loading-small">Loading...</div>
            </div>
            <a href="./changelog.html" class="widget-link" style="margin-top: 10px; display: block;">View all updates <i class="bi bi-arrow-right"></i></a>
          </div>
        </div>

        <!-- Shoutbox Widget -->
        <div class="neo-box scroll-animate widget-shoutbox-sidebar">
          <div class="neo-header"><h3><i class="bi bi-chat-dots"></i> Chatbox</h3></div>
          <div class="neo-content shoutbox-container">
            <!-- Messages area -->
            <div class="shoutbox-messages" id="shoutboxMessages">
              <div class="shoutbox-loading">Loading messages...</div>
            </div>
            
            <!-- Username setup (shown if no username set) -->
            <div class="shoutbox-setup" id="shoutboxSetup">
              <div class="shoutbox-setup-row">
                <input type="color" id="shoutboxColor" value="#6de6e2">
                <input type="text" id="shoutboxUsername" placeholder="Choose a username..." maxlength="30">
              </div>
              <button class="shoutbox-join-btn" onclick="joinShoutbox()">Join Chat</button>
            </div>
            
            <!-- Chat input (shown after joining) -->
            <div class="shoutbox-input" id="shoutboxInput" style="display: none;">
              <div class="shoutbox-user-info">
                <span id="shoutboxCurrentUser"></span>
                <button class="shoutbox-change-user" onclick="changeShoutboxUser()" title="Change username"><i class="bi bi-pencil"></i></button>
              </div>
              <div class="shoutbox-send-row">
                <input type="text" id="shoutboxMessage" placeholder="Type a message..." maxlength="500" onkeypress="if(event.key==='Enter')sendShoutboxMessage()">
                <button class="shoutbox-send-btn" onclick="sendShoutboxMessage()"><i class="bi bi-send"></i></button>
              </div>
            </div>
          </div>
        </div>

        <!-- Resources Quick Links -->
        <div class="neo-box scroll-animate widget-resources">
          <div class="neo-header"><h3><i class="bi bi-book"></i> Resources</h3></div>
          <div class="neo-content">
            <ul class="resources-list">
              <li><a href="./resources.html?cat=scanlation"><i class="bi bi-translate"></i> Scanlation</a></li>
              <li><a href="./resources.html?cat=youtube"><i class="bi bi-youtube"></i> YouTube</a></li>
            </ul>
          </div>
        </div>

      </aside>
    </div>

    <!-- Footer -->
    <div class="neo-footer">
      <a href="https://twitter.com/twit_aurora">Twitter</a> · 
      <a href="https://youtube.com/c/roraYT">YouTube</a> · 
      <a href="mailto:chompajamas@gmail.com">Email</a>
      <br>
      © 2025 nijika.de
    </div>

  </div>

  <!-- ==================== MOBILE BOTTOM NAV ==================== -->
  <nav class="mobile-bottom-nav">
    <ul>
      <li><a href="./"><i class="bi bi-house-fill"></i><span>Home</span></a></li>
      <li><a href="./#about"><i class="bi bi-person-fill"></i><span>About</span></a></li>
      <li><a href="./blogs.html"><i class="bi bi-journal-text"></i><span>Blogs</span></a></li>
      <li><a href="./stories.html"><i class="bi bi-book-fill"></i><span>Stories</span></a></li>
    </ul>
  </nav>

  <!-- Scripts -->
  <script src="./assets/app.js" type="module"></script>
  <script>
    const API_BASE = 'https://nijikade-backend.vercel.app/api';
    let currentCategory = 'scanlation';
    
    const categoryInfo = {
      scanlation: {
        icon: 'bi-translate',
        title: 'Scanlation Guide',
        desc: 'Resources for manga scanlation and translation'
      },
      youtube: {
        icon: 'bi-youtube',
        title: 'YouTube Guide',
        desc: 'Resources for video creation and YouTube'
      }
    };
    
    function switchCategory(cat) {
      currentCategory = cat;
      
      // Update URL
      const url = new URL(window.location);
      url.searchParams.set('cat', cat);
      window.history.pushState({}, '', url);
      
      // Update header
      const info = categoryInfo[cat] || categoryInfo.scanlation;
      document.getElementById('categoryIcon').className = `bi ${info.icon}`;
      document.getElementById('categoryTitle').textContent = info.title;
      document.getElementById('categoryDesc').textContent = info.desc;
      
      // Update active tab
      document.querySelectorAll('.resource-tab, .resource-tabs-mobile .btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.cat === cat);
      });
      
      loadResources(cat);
    }
    
    async function loadResources(category) {
      const container = document.getElementById('resourcePanels');
      container.innerHTML = '<div class="loading">Loading...</div>';
      
      try {
        const res = await fetch(`${API_BASE}/site/resources?category=${category}`);
        const data = await res.json();
        
        if (!data.panels || !data.panels.length) {
          container.innerHTML = '<p class="text-muted text-center">No resources available yet.</p>';
          return;
        }
        
        container.innerHTML = data.panels.map((panel, index) => `
          <div class="resource-panel">
            <h3 class="resource-panel-header" onclick="toggleResourcePanel(${index})">
              ${panel.title}
              <i class="bi bi-chevron-down resource-panel-icon" style="transform: rotate(-90deg);"></i>
            </h3>
            <div class="resource-panel-body" data-panel="${index}" style="max-height: 0; padding: 0; overflow: hidden;">
              <div class="resource-content">${panel.content}</div>
              ${panel.links && panel.links.length ? `
                <div class="resource-links">
                  ${panel.links.map(link => `
                    <a href="${link.url}" target="_blank" class="resource-link">
                      <i class="bi bi-link-45deg"></i> ${link.label}
                    </a>
                  `).join('')}
                </div>
              ` : ''}
            </div>
          </div>
        `).join('');
      } catch (err) {
        console.error('Failed to load resources:', err);
        container.innerHTML = '<p class="text-muted text-center">Failed to load resources.</p>';
      }
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      const params = new URLSearchParams(window.location.search);
      const cat = params.get('cat') || 'scanlation';
      switchCategory(cat);
    });
    
    // Toggle resource panel
    function toggleResourcePanel(index) {
      const panel = document.querySelector(`[data-panel="${index}"]`);
      const icon = panel.previousElementSibling.querySelector('.resource-panel-icon');
      
      if (panel.classList.contains('open')) {
        panel.classList.remove('open');
        panel.style.maxHeight = '0px';
        panel.style.padding = '0';
        icon.style.transform = 'rotate(-90deg)';
      } else {
        panel.classList.add('open');
        panel.style.maxHeight = panel.scrollHeight + 'px';
        panel.style.padding = '20px';
        icon.style.transform = 'rotate(0deg)';
      }
    }
  </script>
</body>
</html>
