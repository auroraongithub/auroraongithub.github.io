<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Add Post Â· nijika.de</title>
    <link rel="stylesheet" href="./../assets/styles.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/classic.min.css" rel="stylesheet" />
  </head>
  <body>
    <!-- Color Picker Modal -->
    <div class="color-picker-modal" data-color-modal>
      <div class="color-picker-content">
        <div class="color-picker-header">
          <h3>Choose Your Color</h3>
          <button class="color-picker-close" data-color-close>
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
        <div class="color-picker-options">
          <button class="color-option" data-color="cyan" title="Cyan (Current)">
            <div class="color-preview" style="background: linear-gradient(135deg, #6de6e2, #a8f5f2);"></div>
            <span>Cyan</span>
          </button>
          <button class="color-option" data-color="pink" title="Pink (Original)">
            <div class="color-preview" style="background: linear-gradient(135deg, #ff6b9d, #ffa4c4);"></div>
            <span>Pink</span>
          </button>
          <button class="color-option" data-color="purple" title="Purple">
            <div class="color-preview" style="background: linear-gradient(135deg, #9b59b6, #bb8fce);"></div>
            <span>Purple</span>
          </button>
          <button class="color-option" data-color="green" title="Green">
            <div class="color-preview" style="background: linear-gradient(135deg, #2ecc71, #7fd99f);"></div>
            <span>Green</span>
          </button>
          <button class="color-option" data-color="orange" title="Orange">
            <div class="color-preview" style="background: linear-gradient(135deg, #ff9f43, #ffbe76);"></div>
            <span>Orange</span>
          </button>
          <button class="color-option" data-color="blue" title="Blue">
            <div class="color-preview" style="background: linear-gradient(135deg, #5dade2, #85c1e9);"></div>
            <span>Blue</span>
          </button>
          <button class="color-option" data-color="red" title="Red">
            <div class="color-preview" style="background: linear-gradient(135deg, #e74c3c, #ec7063);"></div>
            <span>Red</span>
          </button>
          <button class="color-option" data-color="yellow" title="Yellow">
            <div class="color-preview" style="background: linear-gradient(135deg, #f1c40f, #f7dc6f);"></div>
            <span>Yellow</span>
          </button>
          <button class="color-option" data-color="teal" title="Teal">
            <div class="color-preview" style="background: linear-gradient(135deg, #1abc9c, #48c9b0);"></div>
            <span>Teal</span>
          </button>
        </div>
      </div>
    </div>

    <div class="neo-container">
      <!-- Site Banner/Header -->
      <div class="site-banner">
        <div class="brand">nijika.de</div>
        <div class="header-controls">
          <button class="color-picker-toggle" title="Change color" data-color-picker>
            <i class="bi bi-palette"></i>
          </button>
          <button class="theme-toggle" title="Toggle theme" data-toggle-theme>
            <i class="bi bi-brightness-high"></i>
          </button>
        </div>
      </div>

      <div class="neo-layout">
        <aside class="neo-sidebar">
          <div class="neo-box">
            <div class="neo-header"><h3>Content</h3></div>
            <div class="neo-content">
              <ul>
                <li><a href="./blogs.html">Blogs</a></li>
                <li><a href="./stories.html">Stories</a></li>
                <li><a href="./add-post.html" class="active">Add Post</a></li>
              </ul>
            </div>
          </div>
          <div class="neo-box">
            <div class="neo-header"><h3>Site</h3></div>
            <div class="neo-content">
              <ul>
                <li><a href="./status.html">Status Strip</a></li>
                <li><a href="./now.html">Now Page</a></li>
                <li><a href="./changelog.html">Changelog</a></li>
                <li><a href="./resources.html">Resources</a></li>
                <li><a href="./favorites.html">Favorites</a></li>
                <li><a href="./portfolio.html">Portfolio</a></li>
                <li><a href="./settings.html">Settings</a></li>
              </ul>
            </div>
          </div>
          <div class="neo-box">
            <div class="neo-header"><h3>YouTube CMS</h3></div>
            <div class="neo-content">
              <ul>
                <li><a href="./youtube-research.html"><i class="bi bi-youtube"></i> Research</a></li>
                <li><a href="./youtube-transcripts.html"><i class="bi bi-card-text"></i> Transcripts</a></li>
              </ul>
            </div>
          </div>
        </aside>

        <main class="neo-main">
          <section class="neo-box">
            <div class="neo-header"><h2>Add Post</h2></div>
            <div class="neo-content">
      <form id="addBlogForm" class="form">
        <div class="field">
          <label for="title">Title</label>
          <input id="title" type="text" placeholder="Title" />
        </div>
        <div class="field">
          <label for="category">Category</label>
          <select id="category">
            <option value="">Select</option>
            <option value="blog">Blog</option>
            <option value="story">Story</option>
          </select>
        </div>
        <div class="field">
          <label for="tags">Tags</label>
          <input id="tags" type="text" placeholder="tag1, tag2" />
        </div>
        <div class="field">
          <label>Content</label>
          <div id="editor"></div>
          <small style="color:var(--muted)">Use the toolbar for headings, colors, code, alignment, lists, links, images, video, formulas and more.</small>
        </div>
        <button class="btn btn-primary" type="submit">Add Post</button>
      </form>
            </div>
          </section>
        </main>
      </div>
    </div>

    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/quill-better-table@1.2.10/dist/quill-better-table.min.js"></script>
    <script type="module">
      import '../assets/app.js';
      const form = document.querySelector('#addBlogForm');
      const titleInput = document.querySelector('#title');
      const typeInput = document.querySelector('#category');
      const tagsInput = document.querySelector('#tags');
      const quill = new Quill('#editor', {
        theme: 'snow',
        modules: {
          toolbar: [
            [{ header: [1,2,3,4,5,6,false] }],
            ['bold','italic','underline','strike'],
            [{ color: [] }, { background: [] }],
            [{ script: 'sub' }, { script: 'super' }],
            [{ list: 'ordered' }, { list: 'bullet' }],
            [{ indent: '-1' }, { indent: '+1' }],
            [{ align: [] }],
            ['blockquote','code-block'],
            ['link','image','video','formula'],
            ['clean']
          ]
        }
      });
      form?.addEventListener('submit', async (e) => {
        e.preventDefault();
        const title = titleInput.value.trim();
        const type = typeInput.value.trim();
        const tags = tagsInput.value.trim();
        const content = quill.root.innerHTML;
        const token = localStorage.getItem('jwt');
        if (!token) return alert('You are not logged in');
        if (!title || !type || !tags || !quill.root.innerText.trim()) return alert('Fill all the fields');
        const res = await fetch(`https://nijikade-backend.vercel.app/api/post?token=${token}`, {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ title, type, content, tags })
        });
        if (!res.ok) { const j = await res.json(); return alert(j.error || 'Failed'); }
        alert('Post added successfully');
      });
    </script>
  </body>
</html>


