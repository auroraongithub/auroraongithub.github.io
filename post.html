<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Post · nijika.de</title>
  <meta name="description" content="Post from nijika.de">
  <link rel="icon" type="image/x-icon" href="./img/favicon.ico">
  <link rel="stylesheet" href="./assets/styles.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>

  <!-- ==================== MAIN CONTAINER ==================== -->
  <div class="neo-container">
    
    <!-- Site Banner/Header -->
    <div class="site-banner">
      <div class="brand">nijika.de</div>
      <div class="header-controls">
        <button class="color-picker-toggle" title="Change color" data-color-picker>
          <i class="bi bi-palette"></i>
        </button>
        <button class="theme-toggle" title="Toggle theme" data-toggle-theme>
          <i class="bi bi-brightness-high"></i>
        </button>
      </div>
    </div>

    <!-- Color Picker Modal -->
    <div class="color-picker-modal" data-color-modal>
      <div class="color-picker-content">
        <div class="color-picker-header">
          <h3>Choose Your Color</h3>
          <button class="color-picker-close" data-color-close>
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
        <div class="color-picker-options">
          <button class="color-option" data-color="cyan" title="Cyan (Current)">
            <div class="color-preview" style="background: linear-gradient(135deg, #6de6e2, #a8f5f2);"></div>
            <span>Cyan</span>
          </button>
          <button class="color-option" data-color="pink" title="Pink (Original)">
            <div class="color-preview" style="background: linear-gradient(135deg, #ff6b9d, #ffa4c4);"></div>
            <span>Pink</span>
          </button>
          <button class="color-option" data-color="purple" title="Purple">
            <div class="color-preview" style="background: linear-gradient(135deg, #9b59b6, #bb8fce);"></div>
            <span>Purple</span>
          </button>
          <button class="color-option" data-color="green" title="Green">
            <div class="color-preview" style="background: linear-gradient(135deg, #2ecc71, #7fd99f);"></div>
            <span>Green</span>
          </button>
          <button class="color-option" data-color="orange" title="Orange">
            <div class="color-preview" style="background: linear-gradient(135deg, #ff9f43, #ffbe76);"></div>
            <span>Orange</span>
          </button>
          <button class="color-option" data-color="blue" title="Blue">
            <div class="color-preview" style="background: linear-gradient(135deg, #5dade2, #85c1e9);"></div>
            <span>Blue</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Layout: Sidebar + Main -->
    <div class="neo-layout">
      
      <!-- ==================== SIDEBAR ==================== -->
      <aside class="neo-sidebar">
        
        <!-- Navigation Box -->
        <div class="neo-box">
          <div class="neo-header"><h3>Navigate</h3></div>
          <div class="neo-content">
            <ul>
              <li><a href="./">Home</a></li>
              <li><a href="./#about">About</a></li>
              <li><a href="./#portfolio">Portfolio</a></li>
              <li><a href="./blogs.html">Blogs</a></li>
              <li><a href="./stories.html">Stories</a></li>
            </ul>
          </div>
        </div>

        <!-- Post Navigation Box -->
        <div class="neo-box">
          <div class="neo-header"><h3>Post Nav</h3></div>
          <div class="neo-content">
            <ul>
              <li><a href="./blogs.html">Back to Blogs</a></li>
              <li id="prevPostSidebar" style="display:none;"><a href="#">Previous Post</a></li>
              <li id="nextPostSidebar" style="display:none;"><a href="#">Next Post</a></li>
            </ul>
          </div>
        </div>

      </aside>

      <!-- ==================== MAIN CONTENT ==================== -->
      <main class="neo-main">
        
        <!-- Article -->
        <article class="neo-article scroll-animate">
          <div class="article-header">
            <h1 id="title">Loading...</h1>
            <div class="article-meta" id="meta"></div>
          </div>
          <div class="article-content" id="post-content">
            <div class="loading">Loading post content...</div>
          </div>
          <div class="post-nav">
            <a id="prevPost" class="btn btn-ghost" href="#" style="visibility:hidden;">
              <i class="bi bi-arrow-left"></i> Previous
            </a>
            <a id="nextPost" class="btn btn-ghost" href="#" style="visibility:hidden;">
              Next <i class="bi bi-arrow-right"></i>
            </a>
          </div>
        </article>

      </main>
    </div>

    <!-- Footer -->
    <div class="neo-footer">
      <a href="https://twitter.com/twit_aurora">Twitter</a> · 
      <a href="https://youtube.com/c/roraYT">YouTube</a> · 
      <a href="mailto:chompajamas@gmail.com">Email</a>
      <br>
      © 2025 nijika.de
    </div>

  </div>

  <!-- ==================== MOBILE BOTTOM NAV ==================== -->
  <nav class="mobile-bottom-nav">
    <ul>
      <li><a href="./"><i class="bi bi-house-fill"></i><span>Home</span></a></li>
      <li><a href="./#about"><i class="bi bi-person-fill"></i><span>About</span></a></li>
      <li><a href="./#portfolio"><i class="bi bi-briefcase-fill"></i><span>Work</span></a></li>
      <li><a href="./blogs.html"><i class="bi bi-journal-text"></i><span>Blogs</span></a></li>
      <li><a href="./stories.html"><i class="bi bi-book-fill"></i><span>Stories</span></a></li>
    </ul>
  </nav>

  <!-- Scripts -->
  <script type="module">
    import './assets/app.js';
    import { getPost } from './assets/app.js';
    
    async function load() {
      // Load post
      await getPost();
      
      // Compute reading time
      const content = document.querySelector('#post-content');
      const meta = document.querySelector('#meta');
      const words = (content?.innerText || '').trim().split(/\s+/).length;
      const minutes = Math.max(1, Math.round(words / 200));
      const date = new Date().toISOString().slice(0, 10);
      meta.innerHTML = `<i class="bi bi-clock"></i> ${minutes} min read · <i class="bi bi-calendar3"></i> ${date}`;
      
      // Fetch list for prev/next indexing
      const res = await fetch('https://nijikade-backend.vercel.app/api/post?type=blog');
      const data = await res.json();
      const list = (data.posts || []).flatMap(g => g.posts);
      const url = new URL(window.location.href);
      const id = url.searchParams.get('id');
      const idx = list.findIndex(p => String(p.id) === String(id));
      
      const prev = list[idx - 1];
      const next = list[idx + 1];
      
      // Bottom nav buttons
      const prevBtn = document.querySelector('#prevPost');
      const nextBtn = document.querySelector('#nextPost');
      
      // Sidebar nav items
      const prevSidebar = document.querySelector('#prevPostSidebar');
      const nextSidebar = document.querySelector('#nextPostSidebar');
      
      if (prev) {
        prevBtn.href = `./post.html?id=${prev.id}`;
        prevBtn.style.visibility = 'visible';
        prevSidebar.style.display = 'block';
        prevSidebar.querySelector('a').href = `./post.html?id=${prev.id}`;
      }
      
      if (next) {
        nextBtn.href = `./post.html?id=${next.id}`;
        nextBtn.style.visibility = 'visible';
        nextSidebar.style.display = 'block';
        nextSidebar.querySelector('a').href = `./post.html?id=${next.id}`;
      }
    }
    
    load();
  </script>
</body>
</html>
